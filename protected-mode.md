
##分段
####GDTR 全局描述符寄存器
8字节对齐，保存全局描述符表的基线性地址和限长。
|31-----0|15----0|
| 基地址 | 限长  |
限长值+基地址等于表中的最后一个字节的有效地址，
段描述符都是8字节对齐，因此限长值总是等于（8n-1）


GDT本身不是一个段，是线性地址空间中的一个数据结构，
但是LDT存放在LDT类型的系统段中，因此LDT是按照段类型保存的。

####段选择符vs段描述符
段选择符指向段描述符
段选择符是16位的标识符，高13位是索引值，再加上区分GDT和LDT的1位总共可区分2^14^个段，每个段可以达到4GB。

##分页

页表包含2^20^个表项，每个4B，因此需要4M内存。


- 两级页表结构
|31--22|21--12|11--0|
| 目录  |页面 |页内偏移|
[31-22]这10bit索引页目录找到页表的地址，CR3寄存器是页目录的基地址（类似GDTR）。
[21-12]这10bit索引找到页表从而找到页表项，物理地址的前20位。
最后加上页内偏移组成32位物理地址。

####写时复制
当A调用fork生成B时，fork函数会设置B和A以只读方式共享A的物理页面，同时设置对A也是只读。只有A或者B在对页面写操作时产生缺页异常，然后取消共享属性为写操作进程申请新的物理页面。
####需求加载
在使用execv系列函数时候，把调用exec的函数代码和数据段释放，等执行时候再产生缺页异常。
